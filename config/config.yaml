# Save Eat Configuration File

# Dataset Configuration
dataset:
  name: "foodcom_clean"  # Using cleaned dataset
  raw_data_path: "data/raw"
  processed_data_path: "data/processed"
  # Using recipes_clean_full.csv and reviews_clean_full.csv from Kaggle
  # Dataset: "RecSys project dataset Food.com"
  min_user_interactions: 5  # Filter users with less than 5 interactions
  min_recipe_ratings: 3      # Filter recipes with less than 3 ratings
  train_ratio: 0.7
  val_ratio: 0.15
  test_ratio: 0.15

# Graph Configuration
graph:
  node_types: ["user", "recipe", "ingredient"]
  edge_types: ["user_recipe", "recipe_ingredient"]
  embedding_dim: 128
  num_layers: 2

# Model Configuration
model:
  gnn:
    hidden_dim: 256
    num_layers: 3  # Increased for deeper learning
    dropout: 0.3
    activation: "gelu"  # GELU is better than ReLU for transformers/GNNs
    use_gat: true  # Use Graph Attention Networks for better performance
    num_heads: 4  # Multi-head attention
  
  text_encoder:
    model_name: "sentence-transformers/all-MiniLM-L6-v2"
    max_length: 512
    embedding_dim: 384
  
  reranker:
    hidden_dims: [256, 128, 64]
    dropout: 0.2

# Training Configuration
training:
  batch_size: 512
  num_epochs: 50
  learning_rate: 0.001
  weight_decay: 0.0001
  early_stopping_patience: 5
  device: "cuda"  # or "cpu"
  save_path: "models/checkpoints"
  n_negatives: 5  # Negative sampling ratio
  use_learning_rate_scheduler: true  # Learning rate decay
  scheduler_patience: 3
  scheduler_factor: 0.5

# Evaluation Configuration
evaluation:
  metrics: ["ndcg@10", "recall@20", "mrr"]
  top_k: [10, 20, 50]

# API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  reload: true
  max_recommendations: 20

# Database Configuration
# The app auto-detects the database type:
# 1. DATABASE_URL environment variable (Render PostgreSQL, Heroku, etc.)
# 2. POSTGRESQL_* environment variables
# 3. This config file
# 4. Default: SQLite (works everywhere)
database:
  type: "sqlite"  # Default: SQLite (works on Render without config)
  sqlite_path: "data/saveeat.db"
  # PostgreSQL config (used if type="postgresql" and no env vars)
  postgresql:
    host: "localhost"
    port: 5432
    database: "saveeat"
    user: "saveeat_user"
    password: "saveeat_password"

# Context Configuration
context:
  max_available_ingredients: 50
  time_constraints: [15, 30, 45, 60]  # minutes
  dietary_preferences: ["vegetarian", "vegan", "gluten-free", "dairy-free"]

